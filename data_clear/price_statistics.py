import matplotlib.pyplot as plt

# 数据
data = [
    ['素书：感悟传世奇书中的成功智慧', '7.00', '12830193', "['京东图书自营旗舰店']"],
    ['茅盾文学奖获奖作品全集：额尔古纳河右岸（东方甄选董宇辉董老师推荐，新东方直播同款）（迟子建经典力作，获第七届茅盾文学奖）人民文学出', '18.56', '12628332', "['人民文学出版社京东自营官方旗舰店']"],
    ['白鸟与蝙蝠 东野圭吾出道35周年 荣耀新高峰 限量加赠 实地探案图月蚀书签', '34.50', '13627619', "['新经典文化京东自营官方旗舰店']"],
    ['一读就上瘾的中国史1+2(套装全2册)', '52.80', '13317886', "['紫云文心京东自营官方旗舰店']"],
    ['孙子兵法与三十六计（全2册）原著原文白话文译文带注释谋略智慧处世智慧军事谋略奇书', '9.00', '13626905', "['京东图书自营旗舰店']"],
    ['【1元专区】瓦尔登湖 世界名著外国小说文学中文版原版经典名作名家名译', '1.00', '71971324312', "['北京博文图书专营店']"],
    ['渡边淳一·钝感力（帮你玩转人际关系，缓解焦虑情绪，排遣工作压力。马未都、樊登、王俊凯等知名大V书单）', '16.00', '12263069', '[]'],
    ['局外人：（孤独没有什么不好，诺奖得主作品，收录局外人治愈之作《流放与王国》治愈作品）创美工厂', '9.90', '12653936', "['创美工厂京东自营官方旗舰店']"],
    ['【1元专区】边城 沈从文作品（纪念典藏版） 文学书籍', '1.00', '71920613125', "['北京博文图书专营店']"],
    ['写给孩子的山海经 完整无删减故事古代神话寓言故事三四五年级儿童课外阅读书籍彩绘注音版（全6册）', '36.80', '13481947', "['千玺图书京东自营官方旗舰店']"],
    ['【自营】蛤蟆先生去看心理医生（年销200万册！英国经典心理咨询入门书，知名心理学家李松蔚强烈推荐）', '19.00', '12695803', "['果麦京东自营官方旗舰店']"],
    ['自卑与超越  销量破百万！!（翻译家曹晚红原版直译完整全译本 心理启蒙书，平装）创美工厂', '9.90', '12026441', "['创美工厂京东自营官方旗舰店']"],
    ['老人与海', '3.40', '12706194', "['淘乐思京东自营官方旗舰店']"],
    ['杀死一只知更鸟（新）（豆瓣9.2，关于勇气与正义的成长教科书，影响全球5000万家庭的“教养宝典”，奥巴马、贝克汉姆、奥普拉鼎力推荐） [to kill ', '34.80', '13443857', "['译林出版社京东自营官方旗舰店']"],
    ['【包邮】季羡林：时间从来不语，却回答了所有问题（文学大师季羡林百岁人生的智慧精粹未来不足惧过往不须泣心灵励志）', '24.80', '13502500', "['紫图京东自营官方旗舰店']"],
    ['人间烟火，最抚人心 汪曾祺（快意人生的趣味与坚守）大众解压书，缓解焦虑，带给人美和惬意。', '9.80', '12884141', "['文通天下京东自营官方旗舰店']"],
    ['人生海海（ 麦家重磅力作，莫言、董卿盛赞，连续两年高居畅销榜，发行量超300万册）', '27.50', '12508277', "['新经典文化京东自营官方旗舰店']"],
    ['山海经（经典彩绘珍藏版 全注全译全解）【上古三大奇书之一】全本十八卷，无删减【彩绘全译全注】古典文学地理学生活书', '11.80', '13014236', "['翰墨怡香图书京东自营官方旗舰店']"],
    ['余华作品 活着（精装版，余华代表作，易烊千玺推荐阅读 新版）', '31.00', '12987083', "['新经典文化京东自营官方旗舰店']"],
    ['八次危机：温铁军 中国的真实经验1949-2009 ', '39.00', '11134512', "['东方出版社京东自营官方旗舰店']"],
    ['白痴（罗翔老师推荐阅读，真正的理想主义者，都是“白痴”！）', '38.25', '13230220', "['果麦京东自营官方旗舰店']"],
    ['彩色图解山海经：彩书馆（16开四色平装）', '9.90', '12713241', "['京东图书自营旗舰店']"],
    ['绝叫（罗翔推荐，豆瓣 2020年度', '26.20', '12696381', "['联合读创京东自营官方旗舰店']"],
    ['明朝那些事儿增补版.全集（2021版）', '202.50', '13415074', "['磨铁图书京东自营官方旗舰店']"],
    ['西线无战事（2023）', '22.05', '13856954', "['果麦京东自营官方旗舰店']"],
    ['恶意 东野圭吾四大杰作之一 颠覆推理 直面人性深渊 2022新译本', '29.50', '13579024', "['新经典文化京东自营官方旗舰店']"],
    ['墨菲定律（附赠思维导图。无往不利的黄金定律和生存法则，破除职场、处世、情感中的心理魔咒）创美工厂', '9.90', '13394333', "['创美工厂京东自营官方旗舰店']"],
    ['世界尽头的咖啡馆', '20.25', '12608624', "['果麦京东自营官方旗舰店']"],
    ['平凡的世界：全三册（新版，茅盾文学奖获奖作品，激励青年的不朽经典）', '98.00', '12869807', "['新经典文化京东自营官方旗舰店']"],
    ['熵增定律（插画版）：解开一切人性问题的底层规律  任正非、雷军、贝佐斯、巴菲特等大佬推崇的商业逻辑 11个熵减法则让你轻松应对烦恼人生', '14.90', '13208346', "['文通天下京东自营官方旗舰店']"],

]

# 分类规则
def classify_category(price):
    if float(price) <= 30:
        return '价格小于等于30'
    elif float(price) < 100:
        return '价格大于30小于100'
    else:
        return '价格大于等于100'

# 统计各类别数量和具体数据
category_counts = {}
category_data = {}
for row in data:
    category = classify_category(row[1])
    if category in category_counts:
        category_counts[category] += 1
        category_data[category].append(row)
    else:
        category_counts[category] = 1
        category_data[category] = [row]

# 将分类数据和具体数据写入文件
with open('data1.txt', 'w', encoding='utf-8') as f:
    f.write("分类结果为:\n")
    for category, count in category_counts.items():
        f.write(f"{category}: {count}\n")
        f.write("具体数据:\n")
        for row in category_data[category]:
            f.write(f"{row[0]}: {row[1]}\n")

# 生成饼状图
labels = list(category_counts.keys())
sizes = list(category_counts.values())
plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)
plt.axis('equal')  # 使饼状图为圆形
plt.title('分类图表')
plt.show()